var _={};_.debounce=function(c,e,b){var h,g,a,f,i;var d=function(){var j=$.now()-f;if(j<e&&j>0){h=setTimeout(d,e-j)}else{h=null;if(!b){i=c.apply(a,g);a=g=null}}};return function(){a=this;g=arguments;f=$.now();var j=b&&!h;if(!h){h=setTimeout(d,e)}if(j){i=c.apply(a,g);a=g=null}return i}};function localStorageLength(){var b="";for(var a in window.localStorage){if(window.localStorage.hasOwnProperty(a)){b+=window.localStorage[a]}}return b.length}function localStorageSpaceDisp(){var a=localStorageLength();return a?(3+((a*16)/(8*1024))).toFixed(3)+" KB":"Empty (0 KB)"}function assert(d,a,c){if(d){return}var b="Assert failure: "+a+"<br/>"+c;if(notify&&notify.warning){notify.warning(b)}throw new Error(b.replaceAll("<br/>",", "))}String.prototype.replaceAll=function(d,c){return this.split(d).join(c)};function urlParam(c,e){var g=true;var b=function(h,i){c+=(g?"?":"&");g=false;c+=h+"="+i};for(var a in e){var f=e[a];if(!f){continue}if(f instanceof Array){for(var d=0;d<f.length;++d){b(a+"[]",f[d])}}else{b(a,f)}}console.log("[URLMaker] url="+c);return c}function truncateText(b,a){if(b.length>a){b=b.substring(0,a)+TAG("span","text-muted","…")}return b}function TAG(){if(arguments.length==1){return arguments[0]}var a=arguments[arguments.length-1];arguments[arguments.length-1]=undefined;sty=arguments[1]?'class="'+arguments[1]+'"':"";attr=arguments[2]?attrConverter(arguments[2]):"";return"<"+arguments[0]+" "+sty+" "+attr+">"+a+"</"+arguments[0]+">"}function attrConverter(a){return String(a).split('"').join('\\"').split("'").join('"')}function ICON(a){return TAG("i","icon-"+a,"")}function dateConverter(a){var e=new Date(a);if(isNaN(e.getTime())){return"DATE INVAILD!"}var c=typeof(dateGetDays)!="undefined"?dateGetDays(e):false;var b=c||numFill([e.getFullYear(),e.getMonth()+1,e.getDate()],2).join("-");var f=numFill([e.getHours(),e.getMinutes(),e.getSeconds()],2).join(":");return b+" "+f}function formatDateTime(a,b){b=b||0;if(isNaN(a.getTime())){return"DATE INVAILD!"}return(b==0||b==1?a.getFullYear()+"/"+("0"+(a.getMonth()+1)).slice(-2)+"/"+("0"+a.getDate()).slice(-2):"")+(b==0?" ":"")+(b==0||b==2?a.getHours()+":"+("0"+a.getMinutes()).slice(-2)+":"+("0"+a.getSeconds()).slice(-2):"")}function numFill(b,d){var a=false;if(typeof(b)=="number"){a=true;b=[b]}for(var c=0;c<b.length;++c){b[c]=String(b[c]);while(b[c].length<d){b[c]="0"+b[c]}}return a?b[0]:b}function thousandSymbol(a){a=a+"";var b=/(-?\d+)(\d{3})/;while(b.test(a)){a=a.replace(b,"$1,$2")}return a}function roundTo(b,c){var a=Math.pow(10,c);return Math.round(b*a)/a}function reinit(a){var b=new Date();$.Metro.initAccordions(a);$.Metro.initDropdowns(a);$.Metro.initInputs(a);$.Metro.initListViews(a);$.Metro.initTabs(a);$.Metro.initPanels(a);console.log("[Reinit]"+(a?" Area="+a:"")+" "+(new Date()-b)+"ms")}function navClick(a){if(a){a()}if($(".pull-menu").css("display")=="none"){return}$(".pull-menu").click()}function setShow(c,b,a){if(!a){setShow(b,c,true);return}$(c).addClass("hide");$(b).removeClass("hide")}function switchClass(b,a,c){if(c){$(b).addClass(a)}else{$(b).removeClass(a)}}function switchVisible(a,b){if(b){$(a).removeClass("hide")}else{$(a).addClass("hide")}}function switchEnabled(c,d){var b=["info","default","primary","inverse","success"];if(d){$(c).removeAttr("disabled");for(var a=0;a<b.length;++a){if($(c).hasClass("_"+b[a])){$(c).removeClass("_"+b[a]).addClass(b[a])}}}else{$(c).attr("disabled","disabled");for(var a=0;a<b.length;++a){if($(c).hasClass(b[a])){$(c).removeClass(b[a]).addClass("_"+b[a])}}}}function translateMagnificPopup(){$.extend(true,$.magnificPopup.defaults,{tClose:"關閉 (ESC)",tLoading:"載入中...",gallery:{tPrev:"上一張 (LEFT)",tNext:"下一張 (RIGHT)",tCounter:"%curr% / %total%"},image:{tError:'<a href="%url%">本圖片</a>無法載入！'},ajax:{tError:'<a href="%url%">本內容</a>無法載入！'},inline:{tNotFound:"找不到引用的內容。請通知網頁作者！"}});console.log("[translateMagnificPopup] translated.")}function modal(b,d,a,e){var c={items:{src:$(b)},type:"inline",removalDelay:250,modal:d,mainClass:"mfp-fade"+(a?" mfp-zoom":"")};$.extend(true,c,e);$.magnificPopup.open(c);reinit()}function modalHide(){var b=new Date();$.magnificPopup.close();var a=new Date();console.log("[modalHide] "+(a-b)+"ms")}function currentModal(){return $.magnificPopup.instance.currItem}DATATABLES_TRANSLATION={lengthMenu:"每頁顯示 _MENU_ 筆",zeroRecords:"無符合條件的記錄",info:"顯示第 _START_ ~ _END_ 筆資料，共 _TOTAL_ 筆",infoEmpty:"顯示 0 筆資料",infoFiltered:"(從 _MAX_ 筆記錄篩選)",loadingRecords:"載入中...",processing:"處理中...",infoPostFix:"",thousands:",",search:"搜尋：",paginate:{first:ICON("first-2")+"第一頁",last:ICON("last-2")+" 最末頁",next:"下一頁 "+ICON("next"),previous:ICON("previous")+" 上一頁"},aria:{sortAscending:": 遞增排序",sortDescending:": 遞減排序"}};var pendingLightboxOption=null;function lightbox(b){var a=function(c){setTimeout(function(){if(pendingLightboxOption){Shadowbox.open(pendingLightboxOption);pendingLightboxOption=null}},400)};b.options=b.options||{onClose:a};b.options.onClose=a;if(Shadowbox.isOpen()){pendingLightboxOption=b;Shadowbox.close();return}Shadowbox.open(b)}function getBase64Image(b){try{var c=document.createElement("canvas");c.width=b.width;c.height=b.height;var a=c.getContext("2d");a.drawImage(b,0,0);var d=b.src.match(/(jpg|jpeg|png)/);if(d.length){d=d[0]=="jpg"?"jpeg":d[0]}else{throw"Invalid image type for canvas encoder."}console.log(d,c.toDataURL("image/"+d));return c.toDataURL("image/"+d)}catch(f){console&&console.log(f);return"error"}};